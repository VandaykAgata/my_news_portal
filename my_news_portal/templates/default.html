{% load cache %}
{% load i18n %}
{% load tz %}
{% get_current_timezone as user_tz %}
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>{% trans "–ú–æ–π –ù–æ–≤–æ—Å—Ç–Ω–æ–π –ü–æ—Ä—Ç–∞–ª" %}</title>

    <style>
        /* –°–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞ */
        .light-theme {
            background-color: #ffffff;
            color: #212529;
            transition: background-color 0.3s, color 0.3s; /* –ü–ª–∞–≤–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥ */
        }

        /* –¢–µ–º–Ω–∞—è —Ç–µ–º–∞ */
        .dark-theme {
            background-color: #121212;
            color: #e0e0e0;
            transition: background-color 0.3s, color 0.3s;
        }

        /* –°—Å—ã–ª–∫–∏ –¥–ª—è —Ç–µ–º–Ω–æ–π —Ç–µ–º—ã, —á—Ç–æ–±—ã –æ–Ω–∏ –Ω–µ —Å–ª–∏–≤–∞–ª–∏—Å—å */
        .dark-theme a {
            color: #bb86fc;
        }
    </style>
</head>


<body class="{{ request.theme }}">
    <header>
        <h1>üì∞ {% trans "–ù–æ–≤–æ—Å—Ç–Ω–æ–π –ü–æ—Ä—Ç–∞–ª" %}</h1>

        {# 2. –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤—Ä–µ–º–µ–Ω–∏ –∏ –ø–æ—è—Å–µ #}
        <section style="border-bottom: 1px solid #ccc; padding-bottom: 10px;">
            <p>üïí {% trans "–¢–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è" %}: {% now "DATETIME_FORMAT" %}</p>
            <p>üåç {% trans "–í–∞—à —á–∞—Å–æ–≤–æ–π –ø–æ—è—Å" %}: {{ user_tz }}</p>
            <a href="{% url 'set_timezone' %}">‚öôÔ∏è {% trans "–°–º–µ–Ω–∏—Ç—å —á–∞—Å–æ–≤–æ–π –ø–æ—è—Å" %}</a>
        </section>

        <section>
            <form action="{% url 'set_language' %}" method="post">
                {% csrf_token %}
                <input name="next" type="hidden" value="{{ request.get_full_path }}">
                <select name="language">
                    {% get_available_languages as LANGUAGES %}
                    {% get_language_info_list for LANGUAGES as languages %}
                    {% for language in languages %}
                        <option value="{{ language.code }}" {% if language.code == LANGUAGE_CODE %}selected{% endif %}>
                            {{ language.name_local }}
                        </option>
                    {% endfor %}
                </select>
                <input type="submit" value="{% trans '–í—ã–±—Ä–∞—Ç—å' %}">
            </form>
        </section>

        {% cache 600 header_nav LANGUAGE_CODE %}
        <nav>
            <a href="{% url 'post_list' %}">{% trans "–°–ø–∏—Å–æ–∫ –Ω–æ–≤–æ—Å—Ç–µ–π" %}</a>
        </nav>
        {% endcache %}
    </header>

    <main>
        {% block content %}
        {% endblock content %}
    </main>

    <footer>
        {% cache 1200 footer_info LANGUAGE_CODE %}
        <p>&copy; 2026 {% trans "–í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã." %}</p>
        {% endcache %}
    </footer>
</body>
</html>