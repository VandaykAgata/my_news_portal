{% load socialaccount %}
<!DOCTYPE html>
<html>
<head>
    <title>Регистрация</title>
</head>
<body>
    <h1>Регистрация нового пользователя</h1>

    <div class="socialaccount_ballot">
        <p>Можно войти через соцсети:</p>
        <ul>
          {% include "socialaccount/snippets/provider_list.html" with process="signup" %}
        </ul>
    </div>

    <hr>
    <form method="post" action="{% url 'account_signup' %}">
        {% csrf_token %}
        {{ form.as_p }}
        <button type="submit" id="submit-btn">Зарегистрироваться</button>
    </form>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Ищем галочку. В Django формах имя поля обычно 'is_author' (проверь в инспекторе, если не сработает)
            const authorCheckbox = document.querySelector('input[name="is_author"]');
            const submitBtn = document.getElementById('submit-btn');

            if (authorCheckbox && submitBtn) {
                authorCheckbox.addEventListener('change', function () {
                    if (this.checked) {
                        submitBtn.textContent = 'Зарегистрироваться и стать автором';
                    } else {
                        submitBtn.textContent = 'Зарегистрироваться';
                    }
                });
            }
        });
    </script>
</body>
</html>